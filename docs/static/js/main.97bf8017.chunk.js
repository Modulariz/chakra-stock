(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{227:function(e,t,a){e.exports=a.p+"static/media/background.d6e9d6e2.jpeg"},228:function(e,t,a){e.exports=a(417)},270:function(e,t,a){},321:function(e,t){},323:function(e,t){},360:function(e,t){},361:function(e,t){},417:function(e,t,a){"use strict";a.r(t);a(229),a(257),a(259),a(260),a(262);var n=a(0),r=a.n(n),o=a(64),c=a.n(o),l=(a(270),a(45)),i=a(4),u=a(54),s=a(424),d=a(15),m=a(6),p=a(5),f=a(423),E=Object(n.createContext)({}),g={header:"Error",confirmationMenu:{title:"Error",subtitle:void 0,action:function(){return console.log("Confirmation menu action error")}}},b=function(e,t){switch(t.type){case"SET_HEADER":return Object(p.a)(Object(p.a)({},e),{},{header:t.payload});case"SET_CONFIRMATION_MENU":return console.log(t.payload),Object(p.a)(Object(p.a)({},e),{},{confirmationMenu:t.payload});default:throw new Error}},O=function(e){var t=e.children,a=Object(n.useReducer)(b,g),o=Object(m.a)(a,2),c=o[0],l=o[1],i=Object(f.a)(),u=Object(n.useCallback)((function(e){return l({type:"SET_HEADER",payload:e})}),[]),s=Object(n.useCallback)((function(e){return l({type:"SET_CONFIRMATION_MENU",payload:e})}),[]),d=Object(n.useMemo)((function(){return{store:c,dispatch:l,confirmationDrawerState:i,setHeader:u,setConfirmationMenuData:s}}),[c,l,i,u,s]);return r.a.createElement(E.Provider,{value:d},t)},h=function(e){var t=e.onMenuClick,a=Object(n.useContext)(E).store.header;return r.a.createElement(l.a,{as:"nav",align:"center",justify:"space-between",wrap:"wrap",bg:"teal.500",color:"white",position:"relative",zIndex:3},r.a.createElement(i.a,{position:"absolute",width:"100%",textAlign:"center"},r.a.createElement(u.a,{fontSize:"lg"},a)),r.a.createElement(s.a,{isRound:!0,"aria-label":"menu",icon:d.a,variantColor:"teal",size:"lg",onClick:t,m:"0.5rem"}))},v=a(438),y=a(53),C=Object(n.createContext)({}),_={name:"",email:"",user_id:0},S={user:_,token:"",isLoading:!0},j=function(e,t){switch(t.type){case"LOADING":return Object(p.a)(Object(p.a)({},e),{},{isLoading:t.payload});case"SAVE_TOKEN":return Object(p.a)(Object(p.a)({},e),{},{token:t.payload});case"SAVE_USER":return console.log(t.payload),console.log(Object(p.a)(Object(p.a)({},e),{},{user:t.payload})),Object(p.a)(Object(p.a)({},e),{},{user:t.payload});case"LOG_OUT":return localStorage.removeItem("token"),{user:_,token:"",isLoading:!1};default:throw new Error}},D=function(e){var t=e.children,a=Object(n.useReducer)(j,S),o=Object(m.a)(a,2),c=o[0],l=o[1],i=Object(n.useMemo)((function(){return{store:c,dispatch:l}}),[c,l]);return r.a.createElement(C.Provider,{value:i},t)},x=a(136),k=a(97),w=function(e){var t=e.name,a=e.icon,n=e.onClick;return r.a.createElement(x.a,{variant:"ghost",size:"lg",width:"100%",justifyContent:"left",alignItems:"center",paddingLeft:"25px",borderBottom:"1px",borderColor:"rgba(0,0,0,0.1);",onClick:n},r.a.createElement(i.a,{as:a,marginRight:"25px"}),r.a.createElement(u.a,{fontWeight:"lighter",fontSize:"smaller"},t))},F=function(e){var t=e.link,a=e.name,n=e.icon,o=e.onClick,c=function(){return r.a.createElement(w,{name:a,icon:n,onClick:o})};return t?r.a.createElement(k.b,{to:t},r.a.createElement(c,null)):r.a.createElement(c,null)},M=function(e){var t=e.isOpen,a=e.onClose,o=e.links,c=Object(n.useContext)(C),l=c.store.user.name,i=c.dispatch;return r.a.createElement(v.a,{isOpen:t,placement:"left",onClose:a},r.a.createElement(v.d,null),r.a.createElement(v.c,null,r.a.createElement(v.b,null),r.a.createElement(y.e,null,l),r.a.createElement(y.b,{overflowY:"scroll",paddingX:"0"},t&&o.map((function(e,t){var a=e.name,n=e.link,o=e.icon;return r.a.createElement(F,{name:a,link:n,icon:o,key:t})})),r.a.createElement(F,{name:"Salir",icon:d.f,onClick:function(){return i({type:"LOG_OUT"})}}))))},P=function(e){var t=e.children;return r.a.createElement(i.a,{width:"100%",display:"flex",justifyContent:"center"},r.a.createElement(i.a,{width:["95%","90%","80%","80%"]},t))},I=function(e){var t=e.children;return r.a.createElement(i.a,{width:"100vw",height:"90vh",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"0",left:"0"},r.a.createElement(i.a,{p:"20px",bg:"white",rounded:"md"},t))},R=function(e){var t=e.icon,a=e.action,n=e.ariaLabel;return r.a.createElement(s.a,{width:"65px",height:"65px",fontSize:"25px",borderRadius:"50%","aria-label":n,icon:t,onClick:a,position:"fixed",bottom:"15px",right:"15px",isRound:!0,size:"lg",variantColor:"blue"})},A=function(e){var t=e.title,a=e.children,o=Object(n.useContext)(E).setHeader;return Object(n.useEffect)((function(){o(t)}),[t,o]),r.a.createElement(P,null,a)},T=a(425),L=a(426),V=function(e){var t=e.maxHeight,a=e.children,n=e.noResult;return r.a.createElement(T.a,{spacing:1,shouldWrapChildren:!0,maxHeight:t,overflowY:"scroll",my:"5px",p:"10px",pb:"80px",bg:"white",shadow:"md",rounded:"md"},a," ",n&&r.a.createElement(L.a,{size:"sm"},"Parece que no hay resultados :/"))},B=function(e){var t=e.children;return r.a.createElement(T.a,{spacing:1,shouldWrapChildren:!0,my:"5px",p:"10px",bg:"white",rounded:"md",shadow:"md"},t)},q=function(e){var t=e.children;return r.a.createElement(u.a,{opacity:.7,fontSize:"sm"},t)},z=function(e){var t=e.ammount,a=e.red,n=t<0||a?"darkred":"darkgreen";return r.a.createElement(u.a,{color:n,fontWeight:"600",display:"inline"},"$".concat(t<0?-t:t))},U=function(e){var t=e.children;return r.a.createElement(i.a,{display:"flex",justifyContent:"space-between",borderWidth:"1px",rounded:"md",px:"5",py:"2",bg:"white"},t)},N=a(436),G=function(e){var t=e.menu,a=e.onChange,n=e.defaultValue,o=e.name;return r.a.createElement(N.a,{onChange:a,defaultValue:n,name:o},t.map((function(e){var t=e.name,a=e.value,n=e.disabled;return r.a.createElement("option",{disabled:n,key:a,value:a},t)})))},H=function(e){var t=e.title,a=e.subtitle,o=e.menu,c=e.isOpen,l=e.onClose;return Object(n.useEffect)((function(){console.log(a)}),[a]),r.a.createElement(v.a,{isOpen:c,onClose:l,placement:"bottom"},r.a.createElement(v.d,null),r.a.createElement(v.c,null,r.a.createElement(v.b,null),r.a.createElement(y.e,null,t,r.a.createElement(u.a,null),a&&r.a.createElement(q,null,a)),r.a.createElement(y.b,null,c&&o.map((function(e){var t=e.name,a=e.action;return r.a.createElement(x.a,{variant:"ghost",size:"lg",width:"100%",justifyContent:"left",alignItems:"center",paddingLeft:"25px",borderBottom:"1px",borderColor:"rgba(0,0,0,0.1);",onClick:function(){l(),a()}},r.a.createElement(u.a,{fontWeight:"lighter",fontSize:"smaller"},t))})))))},$=function(e){var t=e.isOpen,a=e.onClose,n=e.title,o=e.subtitle,c=e.action;return r.a.createElement(H,{isOpen:t,onClose:a,title:"\xbfSeguro que desea ".concat(n,"?"),subtitle:o,menu:[{name:"Confirmar",action:c},{name:"Cancelar",action:a}]})},W=a(437),K=function(e){var t=e.action;return r.a.createElement(x.a,{variantColor:"teal",variant:"ghost",width:"100%",onClick:t},"Cargar m\xe1s resultados...")},Y=a(18),J=a(427),Q=a(428),X=a(222),Z=a(22),ee=a(14),te=a(20),ae=a.n(te);function ne(){return function(e,t){switch(t.type){case"SET_FILTERS":return Object(p.a)(Object(p.a)({},e),{},{filters:t.payload,offset:0});case"SET_OFFSET":return Object(p.a)(Object(p.a)({},e),{},{offset:t.payload});case"SET_CATEGORIES":return Object(p.a)(Object(p.a)({},e),{},{categories:t.payload});case"SET_RESULTS":return console.log("SET_RESULTS"),Object(p.a)(Object(p.a)({},e),{},{results:t.payload.results,count:t.payload.count,offset:0});case"PUSH_RESULTS":return console.log("PUSH_RESULTS"),Object(p.a)(Object(p.a)({},e),{},{count:t.payload.count,results:{status:t.payload.results.status,error:t.payload.results.error,payload:[].concat(Object(ee.a)(e.results.payload),Object(ee.a)(t.payload.results.payload))}});default:throw new Error}}}function re(e,t){return function(a,n){var r=a.offset,o=a.token;ae.a.get(e,{params:Object(p.a)({offset:r},n),headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){return t({type:r?"PUSH_RESULTS":"SET_RESULTS",payload:{results:{status:"loaded",payload:e.data.result,error:null},count:e.data.count}})})).catch((function(e){return t({type:"SET_RESULTS",payload:{status:"error",error:e,payload:null}})}))}}function oe(e,t,a){return function(){ae.a.get(e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){a({type:"SET_CATEGORIES",payload:e.data.result})})).catch((function(e){throw new Error("no se han podido obtener datos del server")}))}}function ce(e,t,a){return function(n,r){var o=0===r||void 0===r||null===r?"POST":"PUT";ae.a.request({url:e,method:o,data:n,headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return console.log(e.status)})).catch((function(e){return console.log(e)})).finally((function(){return a()}))}}function le(e,t,a,n){return function(r){return ae.a.delete(e,{params:Object(Z.a)({},t,r),headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return console.log(e.status)})).catch((function(e){return console.log(e)})).finally((function(){return n()}))}}function ie(e,t){return{updateFilters:function(t){e({type:"SET_FILTERS",payload:t})},loadMoreData:function(){e({type:"SET_OFFSET",payload:t+10})}}}var ue=function(e){return"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear()," - ").concat(e.getHours(),":").concat(e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes())},se="https://chakra-stock.herokuapp.com/contacts",de={filters:{search:"",role:"c",order:"name"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},me=ne(),pe=function(){var e=Object(n.useReducer)(me,de),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.count,i=Object(n.useContext)(C).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useCallback)((function(e,t){re(se,r)(e,t)}),[]),f=Object(n.useState)([]),E=Object(m.a)(f,2),g=E[0],b=E[1],O=Object(n.useCallback)((function(){!function(e,t,a){return function(){ae.a.get(e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){a(e.data.result)})).catch((function(e){throw new Error("no se han podido obtener datos del server")}))}}("".concat(se,"/menu"),i,b)()}),[i]);return Object(n.useEffect)((function(){p({offset:c,token:i},o)}),[o,l,c,i,p]),{result:a.results,count:a.count,updateFilters:s,loadMoreData:d,postOrUpdateContact:function(e){return ce(se,i,(function(){return p({token:i,offset:0},o)}))(e,e.contact_id)},contactsMenu:g,fetchContactsMinified:O,deleteContactById:function(e){return le(se,"contact_id",i,(function(){return p({token:i,offset:0},o)}))(e)}}},fe="https://chakra-stock.herokuapp.com/expenses",Ee=fe+"/categories",ge={categories:null,filters:{search:"",category_id:null,order:"created_at"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},be=ne(),Oe=function(){var e=Object(n.useReducer)(be,ge),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.categories,i=Object(n.useContext)(C).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useCallback)((function(){oe(Ee,i,r)()}),[i]),f=Object(n.useCallback)((function(e,t){re(fe,r)(e,t)}),[]);return Object(n.useEffect)((function(){f({token:i,offset:0},o)}),[i,o,f]),{result:a.results,count:a.count,updateFilters:s,loadMoreData:d,postOrUpdateExpense:function(e){return ce(fe,i,(function(){return f({token:i,offset:0},o)}))(e,e.expense_id)},fetchExpenseCategories:p,postOrUpdateExpenseCategory:function(e){return ce(Ee,i,p)(e,e.category_id)},deleteExpenseCategoryById:function(e){return le(Ee,"category_id",i,(function(){return p()}))(e)},deleteExpenseById:function(e){return le(fe,"expense_id",i,(function(){return f({token:i,offset:0},o)}))(e)},categories:l,category_id:o.category_id}},he="https://chakra-stock.herokuapp.com/products",ve=he+"/categories",ye={categories:null,filters:{search:"",category_id:null,order:"name"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},Ce=ne(),_e=function(){var e=Object(n.useReducer)(Ce,ye),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.categories,i=Object(n.useContext)(C).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useCallback)((function(){oe(ve,i,r)()}),[i]),f=Object(n.useCallback)((function(e,t){re(he,r)(e,t)}),[]),E=Object(n.useState)(null),g=Object(m.a)(E,2),b=g[0],O=g[1],h=Object(n.useCallback)((function(){ae.a.get("".concat(he,"/list"),{headers:{Authorization:"Bearer ".concat(i)}}).then((function(e){return O(e.data.result)}))}),[i]);return Object(n.useEffect)((function(){f({token:i,offset:0},o)}),[i,o,f]),{result:a.results,count:a.count,updateFilters:s,loadMoreData:d,postOrUpdateProduct:function(e){return ce(he,i,(function(){return f({token:i,offset:0},o)}))(e,e.product_id)},fetchProductCategories:p,postOrUpdateProductCategory:function(e){return ce(ve,i,p)(e,e.category_id)},deleteProductCategoryById:function(e){return le(ve,"category_id",i,(function(){return p()}))(e)},deleteProductById:function(e){return le(he,"product_id",i,(function(){return f({token:i,offset:0},o)}))(e)},categories:l,category_id:o.category_id,minifiedProductsList:b,fetchMinifiedProductsList:h,getProductsPDF:function(){window.open("https://chakra-stock.herokuapp.com/products/pdf","_blank")}}},Se="https://chakra-stock.herokuapp.com/orders",je={filters:{search:"",type:"b",completed:"not_completed",delivered:"all"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},De=ne(),xe=function(){var e=Object(n.useReducer)(De,je),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.count,i=Object(n.useContext)(C).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useState)(null),f=Object(m.a)(p,2),E=f[0],g=f[1],b=Object(n.useCallback)((function(e,t){re(Se,r)(e,t)}),[]),O=Object(n.useCallback)((function(){return b({offset:0,token:i},o)}),[b,o,i]),h=Object(n.useCallback)((function(e,t){ae.a.get("".concat(Se,"/id/products"),{headers:{Authorization:"Bearer ".concat(i)},params:{order_id:e}}).then((function(e){g(e.data.result),t&&t(),console.log(e)})).catch((function(e){return console.log(e)}))}),[i]),v=Object(n.useCallback)((function(e,t){ae.a.request({url:"".concat(Se,"/products"),method:"POST",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){h(e.order_id,t||function(){return{}})})).catch((function(e){return console.log(e)}))}),[h,i]),y=Object(n.useCallback)((function(e){ae.a.request({url:"".concat(Se,"/products"),method:"DELETE",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){h(e.order_id)}))}),[h,i]),_=Object(n.useCallback)((function(e){ae.a.request({url:"".concat(Se,"/products/delivered"),method:"POST",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){O()})).catch((function(e){return console.log(e)}))}),[i,O]),S=Object(n.useCallback)((function(e){ae.a.request({url:"".concat(Se,"/transactions"),method:"POST",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){O()})).catch((function(e){return console.log(e)}))}),[i,O]),j=Object(n.useCallback)((function(e){ae.a.request({url:"".concat(Se,"/completed"),method:"POST",data:e,headers:{Authorization:"Bearer ".concat(i)}}).then((function(){O()})).catch((function(e){return console.log(e)}))}),[i,O]);return Object(n.useEffect)((function(){b({offset:c,token:i},o)}),[o,l,c,i,b]),{result:a.results,count:a.count,updateFilters:s,update:O,loadMoreData:d,postOrUpdateOrder:function(e){ce(Se,i,(function(){return b({token:i,offset:0},o)}))(e,e.order_id),console.log(e)},deleteOrderById:function(e){return le(Se,"order_id",i,(function(){return b({token:i,offset:0},o)}))(e)},fetchOrderProductsByOrderId:h,orderProducts:E,postOrderProduct:v,deleteOrderProduct:y,markDelivered:_,postTransaction:S,markCompleted:j}},ke={filters:{search:"",type:"b",order:"name"},offset:0,count:0,results:{status:"loading",payload:null,error:null}},we=ne(),Fe=function(){var e=Object(n.useReducer)(we,ke),t=Object(m.a)(e,2),a=t[0],r=t[1],o=a.filters,c=a.offset,l=a.count,i=Object(n.useContext)(C).store.token,u=ie(r,c),s=u.updateFilters,d=u.loadMoreData,p=Object(n.useCallback)((function(e,t){re("https://chakra-stock.herokuapp.com/transactions",r)(e,t)}),[]);return Object(n.useEffect)((function(){p({offset:c,token:i},o)}),[o,l,c,i,p]),{result:a.results,count:a.count,updateFilters:s,loadMoreData:d,UpdateTransactionByID:function(e){return ce("https://chakra-stock.herokuapp.com/transactions",i,(function(){return p({token:i,offset:0},o)}))(e,e.transaction_id)}}},Me={status:"init",payload:null,error:null},Pe=function(e,t){switch(t.type){case"SET_RESULTS":return console.log(t.payload),Object(p.a)(Object(p.a)({},e),{},{status:"loaded",payload:t.payload,error:null});case"SET_LOADING":return{payload:null,status:"loading",error:null};case"SET_ERROR":return{payload:null,status:"error",error:t.payload};default:throw new Error}},Ie=function(){var e=Object(n.useContext)(C).store.token,t=Object(n.useReducer)(Pe,Me),a=Object(m.a)(t,2),r=a[0],o=a[1],c=Object(n.useCallback)((function(){o({type:"SET_LOADING"}),ae.a.request({url:"https://chakra-stock.herokuapp.com/stats",method:"get",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return o({type:"SET_RESULTS",payload:e.data})})).catch((function(e){return o({type:"SET_ERROR",payload:"Error de petici\xf3n"})}))}),[e]);return Object(n.useEffect)((function(){c()}),[c]),{store:r}},Re=function(){var e=new Date,t=e.getMonth(),a=e.getDate();return"".concat(["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][t]," 1 - ").concat(a)}();function Ae(){var e=Object(n.useContext)(C).store.user.name,t=Ie().store,a=t.payload,o=t.error,c=t.status;return r.a.createElement(A,{title:"Inicio"},"loaded"===c&&null===o&&a&&r.a.createElement(T.a,{spacing:5,mt:"5px"},r.a.createElement(i.a,{p:"10px",shadow:"md",bg:"white",rounded:"md"},r.a.createElement(L.a,{size:"sm"},"\xa1Hola ",e.trim(),"!"," ","Ten\xe9s ",a.pending_orders," pedidos pendientes.")),r.a.createElement(J.a,null),r.a.createElement(i.a,{p:"10px",shadow:"md",bg:"white",rounded:"md"},r.a.createElement(Q.b,{textAlign:"center"},r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Gasto total"),r.a.createElement(Q.e,null,r.a.createElement(z,{red:!0,ammount:a.transactions_out+a.expenses_sum}))),r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Ganancia bruta"),r.a.createElement(Q.e,null,r.a.createElement(z,{ammount:a.transactions_in}))),r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Ganancia neta"),r.a.createElement(Q.e,null,r.a.createElement(z,{ammount:a.benefits}))),r.a.createElement(Q.c,null,Re))),r.a.createElement(J.a,null),r.a.createElement(i.a,{p:"10px",shadow:"md",bg:"white",rounded:"md"},r.a.createElement(Q.b,{textAlign:"center"},r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Deuda propia"),r.a.createElement(Q.e,null,r.a.createElement(z,{red:!0,ammount:a.own_debt}))),r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Deuda de contactos"),r.a.createElement(Q.e,null,r.a.createElement(z,{red:!0,ammount:a.contacts_debt})))))),"loading"===c&&r.a.createElement(I,null,r.a.createElement(X.a,{size:"xl"})))}var Te=a(30),Le=a(52),Ve=a(68),Be=function(e){var t=e.updateFilters,a=e.filtersData,n=Object(Te.b)(),o=n.register,c=n.handleSubmit,l=n.control,i=c((function(e){t(e)}));return r.a.createElement(Le.a,null,r.a.createElement("form",{onSubmit:i,onChange:i},r.a.createElement(B,null,a.searchBar&&r.a.createElement(Ve.a,{name:a.searchBar.name,placeholder:a.searchBar.placeholder,defaultValue:a.searchBar.defaultValue,ref:o}),a.dropdowns&&a.dropdowns.map((function(e){var t=e.name,a=e.menu,n=e.defaultValue;return r.a.createElement(Te.a,{defaultValue:n,control:l,name:t,as:function(e){var t=e.onChange,n=e.value,o=e.name;return r.a.createElement(G,{menu:a,onChange:function(e){return t(e.target.value)},defaultValue:n,name:o})}})})))))},qe=a(429),ze=a(439),Ue=a(430),Ne=a(431),Ge=function(e){var t=e.isOpen,a=e.onClose,n=e.title,o=e.subtitle,c=e.subsubtitle,s=e.inputs,d=e.onFormSubmit,m=e.deleteFunction,p=e.deleteFieldName,f=Object(Te.b)(),E=f.register,g=f.handleSubmit,b=f.formState,O=f.errors,h=f.control,C=f.getValues,_=g((function(e){d(e),a()}));return r.a.createElement(v.a,{isOpen:t,onClose:a,placement:"bottom"},r.a.createElement(v.d,null),r.a.createElement(v.c,{maxHeight:"100vh",overflowY:"scroll"},r.a.createElement(v.b,null),r.a.createElement(y.e,null,n,r.a.createElement(u.a,null),o&&r.a.createElement(q,null,o),c&&r.a.createElement(q,null,c)),r.a.createElement(y.b,null,r.a.createElement(Le.a,{isInvalid:Object.values(O).find((function(e){return!!e}))},r.a.createElement("form",{onSubmit:_},r.a.createElement(T.a,{spacing:"5px"},s.map((function(e){var t=e.name,a=e.title,n=e.defaultValue,o=e.validationRules,c=e.options,l=e.formHelperText,u=e.maxW;return r.a.createElement(r.a.Fragment,null,O[t]&&O[t].message&&r.a.createElement(qe.a,null,O[t].message),r.a.createElement(i.a,null,r.a.createElement(ze.a,{display:"flex"},r.a.createElement(Ue.a,{children:a,flexGrow:1}),c?r.a.createElement(Te.a,{defaultValue:n||(c[0]&&c[0].value?c[0].value:0),rules:o,control:h,name:t,as:function(e){var t=e.onChange,a=e.value,n=e.name;return r.a.createElement(G,{menu:c,onChange:function(e){t(e.target.value)},defaultValue:a,name:n})}}):r.a.createElement(Ve.a,{name:t,defaultValue:n,ref:E(o),maxW:u||"initial"})),l&&r.a.createElement(Ne.a,{mb:"10px"},l)))})),r.a.createElement(l.a,{justify:"flex-end"},m&&p&&r.a.createElement(x.a,{mt:4,variantColor:"red",isLoading:b.isSubmitting,onClick:function(){return function(e,t){t(C(e)),a()}(p,m)},float:"right"},"Borrar"),r.a.createElement(x.a,{mt:4,ml:4,variantColor:"teal",isLoading:b.isSubmitting,type:"submit",float:"right"},"Guardar"))))))))},He=function(e){var t=e.updateFilters,a=e.categories;return r.a.createElement(Be,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar..."},dropdowns:[{name:"category_id",menu:a?[{name:"Todas las categor\xedas",value:"0"}].concat(Object(ee.a)(a)):[{name:"...",value:"0"}],defaultValue:0},{name:"order",menu:[{name:"Ordenar por nombre",value:"name"},{name:"Ordenar por stock",value:"stock"},{name:"Ordenar por fecha de actualizaci\xf3n",value:"updated_at"},{name:"Ordenar por precio de venta",value:"sell_price"},{name:"Ordenar por precio de compra",value:"buy_price"}],defaultValue:"name"}]}})},$e=function(e){var t=e.title,a=e.ammount,n=e.buyPrice,o=e.sellPrice,c=e.updatedAt,s=e.onClick,m=new Date(c),p=ue(m);return r.a.createElement("div",{onClick:function(){return s()}},r.a.createElement(U,null,r.a.createElement(l.a,{direction:"column",textAlign:"left"},r.a.createElement(u.a,null,t),r.a.createElement(q,null,a," ",a>1?"unidades":"unidad")),r.a.createElement(i.a,{flexDirection:"column",textAlign:"right",alignItems:"right",maxWidth:"40%"},r.a.createElement(i.a,{display:"flex",justifyContent:"flex-end",flexWrap:"wrap",maxWidth:"100%",alignItems:"right"},r.a.createElement(i.a,{display:"flex",m:"5px",mr:"0",flexDirection:"column",alignItems:n<1e4?"center":"flex-end",textAlign:"center"},r.a.createElement(i.a,{mr:n<1e4?"0":"1",as:d.c}),r.a.createElement(z,{red:!0,ammount:n})),r.a.createElement(i.a,{display:"flex",m:"5px",mr:"0",flexDirection:"column",alignItems:o<1e4?"center":"flex-end",textAlign:"center"},r.a.createElement(i.a,{mr:o<1e4?"0":"1",as:d.d}),r.a.createElement(z,{ammount:o}))),r.a.createElement(q,null,p))))},We=function(e){var t=e.name,a=e.address,n=e.phone,o=e.money,c=e.updatedAt,l=e.onClick,s=new Date(c),m=ue(s);return r.a.createElement("div",{onClick:function(){return l()}},r.a.createElement(U,null,r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"left"},r.a.createElement(u.a,null,t),r.a.createElement(q,null,r.a.createElement(i.a,{as:d.j,display:"inline",mr:"5px"}),a),r.a.createElement(q,null,r.a.createElement(i.a,{as:d.k,display:"inline",mr:"5px"}),n)),r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"right",justifyContent:"space-between"},r.a.createElement(i.a,null,r.a.createElement(u.a,{display:"inline"},o>0?"A favor":"Deuda",": "),r.a.createElement(z,{ammount:o})),r.a.createElement(q,null,m))))},Ke=function(e){var t=e.name,a=e.itemAmmount,n=e.delivered,o=e.sum,c=e.debt,l=e.updatedAt,s=e.onClick,d=new Date(l),m=ue(d);return r.a.createElement("div",{onClick:function(){return s()}},r.a.createElement(U,null,r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"left"},r.a.createElement(u.a,null,t),r.a.createElement(q,null,a," ",a>1?"items":"item"),r.a.createElement(q,null,r.a.createElement(W.a,{isChecked:n,size:"sm"},"Entregado"))),r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"right"},r.a.createElement(i.a,null,r.a.createElement(u.a,{display:"inline"}," Suma: "),r.a.createElement(z,{ammount:o})),c>=0?r.a.createElement(i.a,null,r.a.createElement(u.a,{display:"inline"}," Falta pagar: "),r.a.createElement(z,{ammount:c,red:!0})):r.a.createElement(i.a,null,r.a.createElement(u.a,{display:"inline"}," Qued\xf3 a favor: "),r.a.createElement(z,{ammount:-c})),r.a.createElement(q,null,m))))},Ye=function(e){var t=e.title,a=e.sum,n=e.createdAt,o=e.onClick,c=new Date(n),l=ue(c);return r.a.createElement("div",{onClick:function(){return o()}},r.a.createElement(U,null,r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"left"},r.a.createElement(u.a,null,t)),r.a.createElement(i.a,{display:"flex",flexDirection:"column",textAlign:"right"},r.a.createElement(z,{ammount:a}),r.a.createElement(q,null,l))))},Je=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"63vh",noResult:0===a&&!!t.payload},"loaded"===t.status&&t.payload&&t.payload.map((function(e){var t=e.name,a=e.buy_price,o=e.sell_price,c=e.created_at,l=(e.updated_at,e.product_history_id),i=e.product_id,u=e.category_id,s=e.stock;return r.a.createElement($e,{ammount:s,title:t,sellPrice:o,buyPrice:a,updatedAt:c,onClick:function(){return n({name:t,buy_price:a,sell_price:o,product_id:i,category_id:u,product_history_id:l,stock:s})}})})),t.payload&&t.payload.length<a&&r.a.createElement(K,{action:o}))},Qe=function(e){var t=e.listItemDrawerState,a=e.productDrawerState,n=e.confirmationDrawerState,o=e.productData,c=e.setConfirmationMenuData,l=e.deleteFunction,i=o.name,u=o.product_id;return r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: ".concat(i),menu:[{name:"Modificar",action:function(){return a.onOpen()}},{name:"Eliminar",action:function(){c({title:"eliminar ".concat(i),action:function(){return l(u)}}),n.onOpen()}}]})},Xe=function(e){var t=e.actionButtonDrawerState,a=e.onAddProductClick,n=e.onAddProductCategoryClick,o=e.onModifyProductCategoryClick,c=e.getProductsPDF;return r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: Stock",menu:[{name:"Registrar nueva categor\xeda",action:function(){n.onOpen()}},{name:"Modificar categor\xeda existente",action:function(){o.onOpen()}},{name:"Registrar nuevo producto",action:function(){a("Registrar nuevo producto")}},{name:"Generar lista de precios",action:function(){c()}}]})},Ze=function(e){var t=e.productCategoryDrawerState,a=e.submitFunction;e.categories;return r.a.createElement(Ge,{title:"Crear nueva categor\xeda",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,n=e.category_id;return a({name:t,category_id:n})},inputs:[{name:"name",title:"Nombre",defaultValue:"",validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}}]})},et=function(e){var t=e.modifyProductCategoryDrawerState,a=e.submitFunction,n=e.categories,o=e.deleteProductCategoryById,c=e.selectedCategory,l=e.setConfirmationMenuData,i=e.confirmationDrawerState,u=e.productCategoryDrawerState;return r.a.createElement(r.a.Fragment,null,n&&0!==n.length?r.a.createElement(Ge,{title:"Modificar categor\xeda existente",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,n=e.category_id;a({name:t,category_id:n})},deleteFunction:function(e){l({title:"eliminar la categor\xeda seleccionada",subtitle:"\u2022 Todos los productos que son de esta categor\xeda ser\xe1n eliminados en el proceso.",action:function(){return o(e)}}),i.onOpen()},deleteFieldName:"category_id",inputs:[{name:"category_id",title:"Categor\xeda",defaultValue:c,options:n,validationRules:{required:"Debes elegir una categor\xeda",pattern:{value:/^[0-9]*$/,message:"La categor\xeda debe ser un numero"}}},{name:"name",title:"Nombre",defaultValue:"",validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}}]}):r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Parece que no has creado ninguna categor\xeda",subtitle:"\xbfDesea crear una ahora mismo?",menu:[{name:"Chi que chi",action:function(){return u.onOpen()}},{name:"\xd1o",action:function(){return t.onClose()}}]}))},tt=function(e){var t=e.productDrawerState,a=e.productDrawerFormState,n=e.productData,o=e.submitFunction,c=e.categories,l=n.product_id;return r.a.createElement(Ge,{title:a.title,isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,a=e.buy_price,n=e.sell_price,r=e.stock,c=e.category_id;o({name:t,buy_price:a,sell_price:n,stock:r,category_id:c,product_id:l})},inputs:[{name:"category_id",title:"Categor\xeda",defaultValue:n.category_id,options:c,validationRules:{required:"Parece que no has creado ninguna categor\xeda, hace eso primero",pattern:{value:/^[1-9]\d*$/,message:"Parece que no has creado ninguna categor\xeda, hace eso primero"}}},{name:"name",title:"Nombre",defaultValue:n.name,validationRules:{required:"Falta completar la descripcion",minLength:{value:5,message:"La descripcion debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"La descripcion debe tener m\xe1ximo 30 caracteres"}}},{name:"buy_price",title:"Precio de compra",defaultValue:n.buy_price,validationRules:{required:"Falta completar el precio de venta",pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}},{name:"sell_price",title:"Precio de venta",defaultValue:n.sell_price,validationRules:{required:"Falta completar el precio de compra",pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}},{name:"stock",title:"Cantidad en stock",defaultValue:n.stock,validationRules:{required:"Falta completar el n\xfamero en stock",pattern:{value:/^-?[0-9]*$/,message:"El stock debe ser num\xe9rico"}}}]})},at={product_id:0,category_id:0,name:"",buy_price:0,sell_price:0,stock:0,product_history_id:0};function nt(){var e=Object(n.useState)(at),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(f.a)(),u=Object(f.a)(),s=Object(f.a)(),g=Object(n.useState)({title:"error",mode:"error"}),b=Object(m.a)(g,2),O=b[0],h=b[1],v=Object(n.useContext)(E),y=v.confirmationDrawerState,C=v.setConfirmationMenuData,_=_e(),S=_.result,j=_.count,D=_.updateFilters,x=_.loadMoreData,k=_.postOrUpdateProduct,w=_.fetchProductCategories,F=_.postOrUpdateProductCategory,M=_.deleteProductCategoryById,P=_.deleteProductById,I=_.categories,T=_.category_id,L=_.getProductsPDF;Object(n.useEffect)((function(){w()}),[w]);var V=Object(n.useState)(null),B=Object(m.a)(V,2),q=B[0],z=B[1];return Object(n.useEffect)((function(){I&&z(I.map((function(e){return{name:e.name,value:e.category_id}})))}),[I]),r.a.createElement(A,{title:"Stock"},r.a.createElement(He,{updateFilters:D,categories:q}),r.a.createElement(Je,{result:S,count:j,onItemClick:function(e){o(Object(p.a)({},e)),h({title:"Modificar: ".concat(e.name),mode:"edit"}),c.onOpen()},loadMoreData:x}),r.a.createElement(R,{icon:d.b,ariaLabel:"Menu: Stock",action:function(){return l.onOpen()}}),r.a.createElement(Qe,{listItemDrawerState:c,productDrawerState:i,confirmationDrawerState:y,productData:a,setConfirmationMenuData:C,deleteFunction:P}),r.a.createElement(Xe,{actionButtonDrawerState:l,onAddProductClick:function(e){return function(e){o(Object(p.a)({},at)),h({title:e,mode:"create"}),i.onOpen()}(e)},onAddProductCategoryClick:u,onModifyProductCategoryClick:s,getProductsPDF:L}),r.a.createElement(tt,{categories:q,productDrawerState:i,productDrawerFormState:O,submitFunction:function(e){return k(e)},productData:a}),r.a.createElement(Ze,{submitFunction:F,productCategoryDrawerState:u,categories:q}),r.a.createElement(et,{submitFunction:F,modifyProductCategoryDrawerState:s,categories:q,selectedCategory:T,deleteProductCategoryById:M,confirmationDrawerState:y,setConfirmationMenuData:C,productCategoryDrawerState:u}))}var rt=function(e){var t=e.updateFilters;return r.a.createElement(Be,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar (por nombre de contacto)..."},dropdowns:[{name:"type",menu:[{name:"Compras",value:"a"},{name:"Ventas",value:"b"}],defaultValue:"b"},{name:"completed",menu:[{name:"Pendientes",value:"not_completed"},{name:"Completadas",value:"completed"}],defaultValue:"not_completed"},{name:"delivered",menu:[{name:"Entregas finalizadas y pendientes",value:"all"},{name:"Entregas finalizadas",value:"delivered"},{name:"Entregas pendientes",value:"not_delivered"}],defaultValue:"all"}]}})},ot=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"55vh",noResult:0===a&&!!t.payload},"loaded"===t.status&&t.payload&&t.payload.length>0&&t.payload.map((function(e){var t=e.contact,a=e.products_count,o=e.delivered,c=e.sum,l=e.paid,i=e.updated_at,u=e.order_id,s=e.completed,d=e.type,m=e.contact_id;return r.a.createElement(Ke,{name:t.name,itemAmmount:a,delivered:o,sum:c,debt:c-l,updatedAt:i,onClick:function(){return n({contact:t,products_count:a,delivered:o,sum:c,paid:l,order_id:u,completed:s,type:d,contact_id:m})}})})),t.payload&&t.payload.length<a&&r.a.createElement(K,{action:o}))},ct=function(e){var t=e.listItemDrawerState,a=e.orderProductsDrawerState,n=e.confirmationDrawerState,o=e.deliveredProductsDrawerState,c=e.orderData,l=e.setConfirmationMenuData,i=e.orderTransactionDrawerState,u=e.markCompleted,s=e.deleteFunction,d=c.contact.name,m=c.order_id;return r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: pedido de ".concat(d),menu:[{name:"Ver productos",action:function(){return a.onOpen()}}].concat(Object(ee.a)(c.completed?[]:[{name:"Registrar entrega",action:function(){return o.onOpen()}}]),Object(ee.a)(c.completed?[]:[{name:"Registrar cobro",action:function(){return i.onOpen()}}]),Object(ee.a)(c.completed?[]:[{name:"Finalizar pedido",action:function(){l({title:"finalizar este pedido de ".concat(d),subtitle:"No se podran realizarle m\xe1s modificaciones",action:function(){return u({order_id:m})}}),n.onOpen()}}]),[{name:"Eliminar",action:function(){l({title:"eliminar este pedido de ".concat(d),action:function(){return s(m)}}),n.onOpen()}}])})},lt=function(e){var t=e.actionButtonDrawerState,a=e.onAddOrderClick;return r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: Pedidos",menu:[{name:"Registrar nuevo pedido",action:function(){a("Registrar nuevo pedido")}}]})},it=function(e){var t=e.orderDrawerState,a=e.orderDrawerFormState,n=e.orderData,o=e.submitFunction,c=e.contacts,l=n.order_id;return r.a.createElement(Ge,{title:a.title,isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.contact_id,a=e.type;console.log({order_id:l,contact_id:t,type:a}),o({order_id:l,contact_id:t,type:a})},inputs:[{name:"contact_id",title:"Contacto",defaultValue:n.contact.contact_id?n.contact.contact_id:c[0]?c[0].value:0,options:c,validationRules:{required:"Parece que no has creado ningun contacto"}},{name:"type",title:"Tipo",defaultValue:n.type?n.type:"b",options:[{name:"Compra",value:"a"},{name:"Venta",value:"b"}],validationRules:{required:"Error en la seleccion de tipo"}}]})},ut=function(e){var t=e.deliveredProductsDrawerState,a=e.orderProducts,n=e.submitFunction,o=e.clickedItem,c=o.order_id,l=o.contact.name;return r.a.createElement(Ge,{title:"Registrando entrega del pedido de ".concat(l),subtitle:"Los valores por defecto entregan el pedido completo.",subsubtitle:"Los valores negativos simbolizan retornos.",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=Object.entries(e).map((function(e){return{product_id:parseInt(e[0]),ammount:parseInt(e[1])}}));n({order_id:c,products:t})},inputs:a?a.map((function(e){return{name:"".concat(e.product_id),title:e.product_version.name,defaultValue:e.ammount-e.delivered,validationRules:{required:!0,pattern:{value:/^-?[0-9]*$/,message:"la cantidad debe ser numerica"},validate:{max:function(t){return parseInt(t)<=e.ammount-e.delivered}}},formHelperText:"Pedidos: ".concat(e.ammount," - Entregados: ").concat(e.delivered," - Faltan entregar: ").concat(e.ammount-e.delivered),maxW:"20%"}})):[{name:"loading",title:"loading",defaultValue:0,validationRules:{required:!1,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},st=function(e){var t=e.orderTransactionDrawerState,a=e.orderData,n=e.submitFunction,o=a.order_id;return r.a.createElement(Ge,{title:"Registrar cobro de pedido de ".concat(a.contact.name),isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.sum;n({order_id:o,sum:t})},inputs:[{name:"sum",title:"$",defaultValue:a.sum-a.paid,validationRules:{required:!0,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},dt=a(440),mt=a(432),pt=a(433),ft=a(435),Et=a(441),gt=function(e){var t=e.isOpen,a=e.onClose,o=e.onFormSubmit,c=e.deleteFunction,u=e.orderProducts,p=e.minifiedProductsList,f=e.fetchMinifiedProductsList,E=e.fetchProductCategories,g=e.categories,b=e.clickedItem,O=b.order_id,h=b.type,C=b.contact.name,_=b.completed,S=e.update,j=Object(Te.b)(),D=j.handleSubmit,k=j.formState,w=j.errors,F=j.control,M=j.watch,P=j.setValue,I=Object(n.useState)(null),R=Object(m.a)(I,2),A=R[0],L=R[1],V=Object(n.useState)(),B=Object(m.a)(V,2),q=B[0],z=B[1],U=Object(n.useState)(0),N=Object(m.a)(U,2),H=N[0],$=N[1],W=M("category"),K=M("product_id");Object(n.useEffect)((function(){f(),E()}),[f,E]),Object(n.useEffect)((function(){u&&p&&L(p.filter((function(e){return!u.find((function(t){return t.product_id===e.product_id}))})))}),[u,p]);var Y=Object(n.useCallback)((function(e,t){var a=t.find((function(t){return t.product_id===parseInt(e)}));$(a&&a.stock?a.stock:0),P("ammount",1)}),[P]),J=Object(n.useCallback)((function(e){if(u&&p&&A){var t=(parseInt(e)?A.filter((function(t){return t.category_id===parseInt(e)})):A).map((function(e){return{name:e.name,value:e.product_id}}));console.log(t),z(t);var a=t[0]?t[0].value:0;P("product_id",a),Y("".concat(a),p)}}),[A,Y,p,u,P]);Object(n.useEffect)((function(){A&&J("0")}),[g,A,J]),Object(n.useEffect)((function(){p&&K&&Y(K,p)}),[p,Y,K,W]);var X=D((function(e){var t=e.product_id,a=e.ammount;console.log({product_id:t,ammount:a,order_id:O}),o({product_id:t,ammount:a,order_id:O},(function(){P("product_id",void 0),P("category",0)}))}));return r.a.createElement(v.a,{isOpen:t,onClose:function(){a(),S()},placement:"bottom"},r.a.createElement(v.d,null),r.a.createElement(v.c,{overflowY:"scroll",maxHeight:"100vh"},r.a.createElement(v.b,null),r.a.createElement(y.e,null,"Productos del pedido de ".concat(C)),r.a.createElement(y.b,null,r.a.createElement(i.a,{height:"30vh",overflowY:"scroll"},u&&r.a.createElement(dt.a,{allowToggle:!0,allowMultiple:!0},u.map((function(e){return r.a.createElement(dt.d,null,r.a.createElement(dt.b,null,r.a.createElement(i.a,{flex:"1",textAlign:"left"},"x".concat(e.ammount," "),e.product_version.name),r.a.createElement(dt.c,null)),r.a.createElement(dt.e,{pb:4},r.a.createElement(mt.c,{spacing:3},r.a.createElement(mt.b,null,r.a.createElement(mt.a,{icon:"attachment",color:"green.500"}),"Valor por unidad : $","a"===h?e.product_version.buy_price:e.product_version.sell_price),r.a.createElement(mt.b,null,r.a.createElement(mt.a,{icon:"attachment",color:"green.500"}),"Suma : $","a"===h?e.product_version.buy_price*e.ammount:e.product_version.sell_price*e.ammount),!_&&r.a.createElement(mt.b,null,r.a.createElement(mt.a,{icon:e.delivered===e.ammount?"check-circle":"warning",color:e.delivered===e.ammount?"green.500":"red.500"}),"Entregados : ",e.delivered)),!_&&r.a.createElement(T.a,{direction:"row",justify:"flex-end"},r.a.createElement(s.a,{icon:d.l,variantColor:"red",isLoading:k.isSubmitting,onClick:function(){return c({product_id:e.product_id,order_id:O})},float:"right","aria-label":"borrar"},"Borrar"))))})))),!_&&r.a.createElement(dt.a,{allowToggle:!0,allowMultiple:!0},r.a.createElement(dt.d,null,r.a.createElement(dt.b,null,r.a.createElement(i.a,{flex:"1",textAlign:"center"},r.a.createElement(pt.a,{htmlFor:"addproduct",textAlign:"center",width:"100%",fontWeight:"bold"},"Agregar un producto")),r.a.createElement(dt.c,null)),r.a.createElement(dt.e,null,r.a.createElement(Le.a,{isInvalid:Object.values(w).find((function(e){return!!e}))},r.a.createElement("form",{onSubmit:X,name:"addproduct"},r.a.createElement(T.a,null,r.a.createElement(T.a,{justify:"center"},g&&r.a.createElement(i.a,null,r.a.createElement(pt.a,{htmlFor:"category"},"Categor\xeda"),r.a.createElement(Te.a,{defaultValue:0,control:F,name:"category",as:function(e){var t=e.onChange,a=e.value,n=e.name;return r.a.createElement(G,{menu:[{name:"Todas las categor\xedas",value:0}].concat(Object(ee.a)(g.map((function(e){return{name:e.name,value:e.category_id}})))),onChange:function(e){t(e.target.value),J(e.target.value)},defaultValue:a,name:n})}})),A&&r.a.createElement(i.a,null,r.a.createElement(pt.a,{htmlFor:"product_id"},"Producto"),r.a.createElement(Te.a,{defaultValue:q&&q[0]?q[0].value:1,control:F,name:"product_id",as:function(e){var t=e.onChange,a=e.value,n=e.name;return r.a.createElement(G,{menu:q||[],onChange:function(e){return t(e.target.value)},defaultValue:a,name:n})}}),r.a.createElement(Ne.a,{mb:"10px"},"En stock: ".concat(H))),A&&r.a.createElement(i.a,null,r.a.createElement(pt.a,{htmlFor:"ammount"},"Cantidad"),r.a.createElement(Te.a,{defaultValue:1,control:F,name:"ammount",as:function(e){var t=e.onChange,a=e.value;e.name;return r.a.createElement(i.a,null,r.a.createElement(l.a,{mr:3,mb:5},r.a.createElement(ft.a,{maxW:"100px",mr:"2rem",value:a,onChange:function(e){return t(e)}}),r.a.createElement(Et.d,{max:"b"===h?H:20,min:1,flex:"1",value:a,onChange:function(e){return t(e)}},r.a.createElement(Et.c,null),r.a.createElement(Et.a,null),r.a.createElement(Et.b,{fontSize:"sm",width:"32px",height:"20px",children:a}))))}}))),r.a.createElement(T.a,{justify:"space-between",direction:"row",align:"center"},u&&r.a.createElement(Q.a,null,r.a.createElement(Q.d,null,"Suma total del pedido"),r.a.createElement(Q.e,{color:"darkgreen"},"$",u.reduce((function(e,t){return"a"===h?e+t.ammount*t.product_version.buy_price:e+t.ammount*t.product_version.sell_price}),0))),r.a.createElement(i.a,null,r.a.createElement(x.a,{variantColor:"teal",isLoading:k.isSubmitting,type:"submit"},"Agregar"))))))))))))},bt={order_id:0,completed:!1,type:"",contact_id:0,products_count:0,paid:0,sum:0,delivered:!1,contact:{name:"",address:"",phone:"",contact_id:0}};function Ot(){var e=Object(n.useState)(bt),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(f.a)(),u=Object(f.a)(),s=Object(f.a)(),g=Object(f.a)(),b=Object(n.useState)({title:"error",mode:"error"}),O=Object(m.a)(b,2),h=O[0],v=O[1],y=Object(n.useContext)(E),C=y.confirmationDrawerState,_=y.setConfirmationMenuData,S=xe(),j=S.result,D=S.count,x=S.updateFilters,k=S.loadMoreData,w=S.postOrUpdateOrder,F=S.deleteOrderById,M=S.fetchOrderProductsByOrderId,P=S.orderProducts,I=S.postOrderProduct,T=S.deleteOrderProduct,L=S.update,V=S.markDelivered,B=S.postTransaction,q=S.markCompleted,z=pe(),U=z.contactsMenu,N=z.fetchContactsMinified;Object(n.useEffect)((function(){N()}),[N]);var G=_e(),H=G.minifiedProductsList,$=G.fetchMinifiedProductsList,W=G.fetchProductCategories,K=G.categories;return r.a.createElement(A,{title:"Pedidos"},r.a.createElement(rt,{updateFilters:x}),r.a.createElement(ot,{result:j,count:D,onItemClick:function(e){o(e),v({title:"Modificar pedido de ".concat(e.contact.name),mode:"edit"}),e.order_id&&M(e.order_id),c.onOpen()},loadMoreData:k}),r.a.createElement(R,{icon:d.i,ariaLabel:"Menu: Gastos",action:function(){return l.onOpen()}}),r.a.createElement(ct,{listItemDrawerState:c,orderProductsDrawerState:s,confirmationDrawerState:C,deliveredProductsDrawerState:u,orderTransactionDrawerState:g,orderData:a,setConfirmationMenuData:_,markCompleted:q,deleteFunction:F}),r.a.createElement(lt,{actionButtonDrawerState:l,onAddOrderClick:function(e){return function(e){o(Object(p.a)({},bt)),v({title:e,mode:"create"}),i.onOpen()}(e)}}),r.a.createElement(it,{contacts:U,orderDrawerState:i,orderDrawerFormState:h,submitFunction:function(e){return w(e)},orderData:a}),r.a.createElement(gt,{clickedItem:a,isOpen:s.isOpen,onClose:s.onClose,orderProducts:P,minifiedProductsList:H,fetchMinifiedProductsList:$,fetchProductCategories:W,onFormSubmit:I,deleteFunction:T,categories:K,update:L}),r.a.createElement(ut,{deliveredProductsDrawerState:u,orderProducts:P,clickedItem:a,submitFunction:V}),r.a.createElement(st,{orderTransactionDrawerState:g,submitFunction:B,orderData:a}))}var ht=function(e){var t=e.updateFilters;return r.a.createElement(Be,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar..."},dropdowns:[{name:"role",menu:[{name:"Clientes",value:"c"},{name:"Proveedores",value:"p"}],defaultValue:"c"},{name:"order",menu:[{name:"Ordenar por nombre",value:"name"},{name:"Ordenar por deuda",value:"money"},{name:"Ordenar por fecha de ult. Actualizaci\xf3n",value:"updated_at"}],defaultValue:"name"}]}})},vt=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"63vh",noResult:0===a&&!!t.payload},"loaded"===t.status&&t.payload&&t.payload.map((function(e){var t=e.name,a=e.address,o=e.phone,c=e.money,l=e.role,i=e.updated_at,u=e.contact_id;return r.a.createElement(We,{name:t,address:a,phone:o,money:c,updatedAt:i,onClick:function(){return n({name:t,address:a,phone:o,money:c,role:l,contact_id:u})}})})),t.payload&&t.payload.length<a&&r.a.createElement(K,{action:o}))},yt=function(e){var t=e.listItemMenu,a=e.contactMenu,n=e.confirmationDrawerState,o=e.contactData,c=e.setConfirmationMenuData,l=e.postOrUpdateContact,i=e.deleteContactById,u=o.name;return r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: ".concat(u),menu:[{name:"Llamar",action:function(){window.open("tel:+540".concat(o.phone),"_blank")}},{name:"Modificar",action:function(){return a.onOpen()}},{name:"Saldar deuda",action:function(){return alert("Saldar deuda de ".concat(u))}},{name:"Reiniciar el contador de dinero",action:function(){c({title:"reiniciar el contador de ".concat(u),action:function(){return l(Object(p.a)(Object(p.a)({},o),{},{money:0}))}}),n.onOpen()}},{name:"Eliminar",action:function(){c({title:"eliminar a ".concat(u),action:function(){return i(o.contact_id)}}),n.onOpen()}}]})},Ct=function(e){var t=e.actionButtonMenu,a=e.onAddContactClick;return r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: Contactos",menu:[{name:"Registrar nuevo cliente",action:function(){a("c","Registrar nuevo cliente")}},{name:"Registrar nuevo proveedor",action:function(){a("p","Registrar nuevo proveedor")}}]})},_t=function(e){var t=e.contactMenu,a=e.contactMenuFormState,n=e.contactData,o=e.submitFunction,c=n.contact_id,l=n.role;return r.a.createElement(Ge,{title:a.title,isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.address,a=e.money,n=e.name,r=e.phone;return o({address:t,money:a,name:n,phone:r,contact_id:c,role:l})},inputs:[{name:"name",title:"Nombre",defaultValue:n.name,validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}},{name:"phone",title:"Tel\xe9fono",defaultValue:n.phone,validationRules:{required:"Falta completar el tel\xe9fono",minLength:{value:10,message:"El telefono debe tener m\xednimo 10 caracteres"},maxLength:{value:30,message:"El telefono debe tener m\xe1ximo 30 caracteres"},pattern:{value:/^(?:(?:00)?549?)?0?(?:11|[2368]\d)(?:(?=\d{0,2}15)\d{2})??\d{8}$/,message:"El tel\xe9fono debe ser v\xe1lido para Argentina"}}},{name:"address",title:"Direcci\xf3n",defaultValue:n.address,validationRules:{required:"Falta completar la direcci\xf3n",minLength:{value:5,message:"La direcci\xf3n debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"La direcci\xf3n debe tener m\xe1ximo 30 caracteres"}}},{name:"money",title:"Dinero",defaultValue:n.money,validationRules:{required:!1,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},St={contact_id:0,name:"",phone:"",money:0,role:"c",address:""};function jt(){var e=Object(n.useState)(St),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(f.a)(),u=Object(n.useState)({title:"error",mode:"error",role:"c"}),s=Object(m.a)(u,2),g=s[0],b=s[1],O=Object(n.useContext)(E),h=O.confirmationDrawerState,v=O.setConfirmationMenuData,y=pe(),C=y.result,_=y.count,S=y.updateFilters,j=y.loadMoreData,D=y.postOrUpdateContact,x=y.deleteContactById;return r.a.createElement(A,{title:"Contactos"},r.a.createElement(ht,{updateFilters:S}),r.a.createElement(vt,{result:C,count:_,onItemClick:function(e){o(Object(p.a)({},e)),b({title:"Modificar: ".concat(e.name),mode:"edit",role:e.role}),c.onOpen()},loadMoreData:j}),r.a.createElement(R,{icon:d.m,ariaLabel:"Menu: Contactos",action:function(){return l.onOpen()}}),r.a.createElement(yt,{listItemMenu:c,contactMenu:i,confirmationDrawerState:h,contactData:a,setConfirmationMenuData:v,postOrUpdateContact:function(e){return D(e)},deleteContactById:x}),r.a.createElement(Ct,{actionButtonMenu:l,onAddContactClick:function(e,t){return function(e,t){o(Object(p.a)(Object(p.a)({},St),{},{role:e})),b({title:t,mode:"create",role:e}),i.onOpen()}(e,t)}}),r.a.createElement(_t,{contactMenu:i,contactMenuFormState:g,submitFunction:function(e){return D(e)},contactData:a}))}var Dt=function(e){var t=e.updateFilters;return r.a.createElement(Be,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar..."},dropdowns:[{name:"type",menu:[{name:"Cobros",value:"b"},{name:"Pagos",value:"a"}],defaultValue:"b"}]}})},xt=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"63vh",noResult:0===a&&!!t.payload},"loaded"===t.status&&t.payload&&t.payload.map((function(e){var t=e.transaction_id,a=e.name,o=e.sum,c=e.type,l=e.order_id,i=e.contact_id,u=e.created_at;return r.a.createElement(Ye,{title:a,sum:o,createdAt:u,onClick:function(){return n({transaction_id:t,name:a,sum:o,type:c,order_id:l,contact_id:i})}})})),t.payload&&t.payload.length<a&&r.a.createElement(K,{action:o}))},kt=function(e){var t=e.listItemMenu,a=e.transactionMenu,n=e.confirmationDrawerState,o=e.transactionData,c=e.setConfirmationMenuData,l=o.name;return r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: ".concat(l),menu:[{name:"Modificar",action:function(){return a.onOpen()}},{name:"Eliminar",action:function(){c({title:"eliminar transaccion de ".concat(l),action:function(){return alert("".concat(l," eliminado"))}}),n.onOpen()}}]})},wt=function(e){var t=e.transactionMenu,a=e.transactionData,n=e.submitFunction,o=a.transaction_id,c=a.type,l=a.name;return r.a.createElement(Ge,{title:"Modificar ".concat("a"===c?"pago":"cobro"," a ").concat(l),isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.sum;return n({sum:t,transaction_id:o})},inputs:[{name:"sum",title:"Dinero",defaultValue:a.sum,validationRules:{required:!1,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},Ft={transaction_id:0,name:"",sum:0,type:"b",order_id:0,contact_id:0};function Mt(){var e=Object(n.useState)(Ft),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(n.useContext)(E),u=i.confirmationDrawerState,s=i.setConfirmationMenuData,d=Fe(),g=d.result,b=d.count,O=d.updateFilters,h=d.loadMoreData,v=d.UpdateTransactionByID;return r.a.createElement(A,{title:"Transacciones"},r.a.createElement(Dt,{updateFilters:O}),r.a.createElement(xt,{result:g,count:b,onItemClick:function(e){o(Object(p.a)({},e)),c.onOpen()},loadMoreData:h}),r.a.createElement(kt,{listItemMenu:c,transactionMenu:l,confirmationDrawerState:u,transactionData:a,setConfirmationMenuData:s}),r.a.createElement(wt,{transactionMenu:l,submitFunction:function(e){return v(e)},transactionData:a}))}var Pt=function(e){var t=e.updateFilters,a=e.categories;return r.a.createElement(Be,{updateFilters:t,filtersData:{searchBar:{name:"search",defaultValue:"",placeholder:"Buscar..."},dropdowns:[{name:"category_id",menu:a?[{name:"Todas las categor\xedas",value:"0"}].concat(Object(ee.a)(a)):[{name:"...",value:"0"}],defaultValue:0},{name:"order",menu:[{name:"Ordenar por fecha de creaci\xf3n",value:"created_at"},{name:"Ordenar por descripcion",value:"description"},{name:"Ordenar por suma",value:"sum"}],defaultValue:"created_at"}]}})},It=function(e){var t=e.result,a=e.count,n=e.onItemClick,o=e.loadMoreData;return r.a.createElement(V,{maxHeight:"63vh",noResult:0===a&&!!t.payload},"loaded"===t.status&&t.payload&&t.payload.map((function(e){var t=e.description,a=e.sum,o=e.created_at,c=(e.updated_at,e.expense_id),l=e.category_id;return r.a.createElement(Ye,{title:t,sum:-a,createdAt:o,onClick:function(){return n({description:t,expense_id:c,category_id:l,sum:a})}})})),t.payload&&t.payload.length<a&&r.a.createElement(K,{action:o}))},Rt=function(e){var t=e.listItemDrawerState,a=e.expenseDrawerState,n=e.confirmationDrawerState,o=e.expenseData,c=e.setConfirmationMenuData,l=e.deleteFunction,i=o.description,u=o.expense_id;return r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: ".concat(i),menu:[{name:"Modificar",action:function(){return a.onOpen()}},{name:"Eliminar",action:function(){c({title:"eliminar ".concat(i),action:function(){return l(u)}}),n.onOpen()}}]})},At=function(e){var t=e.actionButtonDrawerState,a=e.onAddExpenseClick,n=e.onAddExpenseCategoryClick,o=e.onModifyExpenseCategoryClick;return r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Menu: Gastos",menu:[{name:"Registrar nueva categor\xeda",action:function(){n.onOpen()}},{name:"Modificar categor\xeda existente",action:function(){o.onOpen()}},{name:"Registrar nuevo gasto",action:function(){a("Registrar nuevo gasto")}}]})},Tt=function(e){var t=e.expenseCategoryDrawerState,a=e.submitFunction;e.categories;return r.a.createElement(Ge,{title:"Crear nueva categor\xeda",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,n=e.category_id;return a({name:t,category_id:n})},inputs:[{name:"name",title:"Nombre",defaultValue:"",validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}}]})},Lt=function(e){var t=e.modifyExpenseCategoryDrawerState,a=e.submitFunction,n=e.categories,o=e.deleteExpenseCategoryById,c=e.selectedCategory,l=e.setConfirmationMenuData,i=e.confirmationDrawerState,u=e.expenseCategoryDrawerState;return r.a.createElement(r.a.Fragment,null,n&&0!==n.length?r.a.createElement(Ge,{title:"Modificar categor\xeda existente",isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.name,n=e.category_id;a({name:t,category_id:n})},deleteFunction:function(e){l({title:"eliminar la categor\xeda seleccionada",subtitle:"\u2022 Todos los gastos que son de esta categor\xeda ser\xe1n eliminados en el proceso.",action:function(){return o(e)}}),i.onOpen()},deleteFieldName:"category_id",inputs:[{name:"category_id",title:"Categor\xeda",defaultValue:c,options:n,validationRules:{required:"Debes elegir una categor\xeda",pattern:{value:/^[0-9]*$/,message:"La categor\xeda debe ser un numero"}}},{name:"name",title:"Nombre",defaultValue:"",validationRules:{required:"Falta completar el nombre",minLength:{value:5,message:"El nombre debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"El nombre debe tener m\xe1ximo 30 caracteres"}}}]}):r.a.createElement(H,{isOpen:t.isOpen,onClose:t.onClose,title:"Parece que no has creado ninguna categor\xeda",subtitle:"\xbfDesea crear una ahora mismo?",menu:[{name:"Chi que chi",action:function(){return u.onOpen()}},{name:"\xd1o",action:function(){return t.onClose()}}]}))},Vt=function(e){var t=e.expenseDrawerState,a=e.expenseDrawerFormState,n=e.expenseData,o=e.submitFunction,c=e.categories,l=n.expense_id;return r.a.createElement(Ge,{title:a.title,isOpen:t.isOpen,onClose:t.onClose,onFormSubmit:function(e){var t=e.description,a=e.sum,n=e.category_id;o({description:t,sum:a,category_id:n,expense_id:l})},inputs:[{name:"category_id",title:"Categor\xeda",defaultValue:n.category_id,options:c,validationRules:{required:"Parece que no has creado ninguna categor\xeda, hace eso primero",pattern:{value:/^[1-9]\d*$/,message:"Parece que no has creado ninguna categor\xeda, hace eso primero"}}},{name:"description",title:"Descripci\xf3n",defaultValue:n.description,validationRules:{required:"Falta completar la descripcion",minLength:{value:5,message:"La descripcion debe tener m\xednimo 5 caracteres"},maxLength:{value:30,message:"La descripcion debe tener m\xe1ximo 30 caracteres"}}},{name:"sum",title:"Suma",defaultValue:n.sum,validationRules:{required:!1,pattern:{value:/^-?[0-9]*$/,message:"El dinero debe ser num\xe9rico"}}}]})},Bt={expense_id:0,category_id:0,description:"",sum:0};function qt(){var e=Object(n.useState)(Bt),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(f.a)(),l=Object(f.a)(),i=Object(f.a)(),u=Object(f.a)(),s=Object(f.a)(),g=Object(n.useState)({title:"error",mode:"error"}),b=Object(m.a)(g,2),O=b[0],h=b[1],v=Object(n.useContext)(E),y=v.confirmationDrawerState,C=v.setConfirmationMenuData,_=Oe(),S=_.result,j=_.count,D=_.updateFilters,x=_.loadMoreData,k=_.postOrUpdateExpense,w=_.fetchExpenseCategories,F=_.postOrUpdateExpenseCategory,M=_.deleteExpenseCategoryById,P=_.deleteExpenseById,I=_.categories,T=_.category_id;Object(n.useEffect)((function(){w()}),[w]);var L=Object(n.useState)(null),V=Object(m.a)(L,2),B=V[0],q=V[1];return Object(n.useEffect)((function(){I&&q(I.map((function(e){return{name:e.name,value:e.category_id}})))}),[I]),r.a.createElement(A,{title:"Gastos"},r.a.createElement(Pt,{updateFilters:D,categories:B}),r.a.createElement(It,{result:S,count:j,onItemClick:function(e){o(Object(p.a)({},e)),h({title:"Modificar: ".concat(e.description),mode:"edit"}),c.onOpen()},loadMoreData:x}),r.a.createElement(R,{icon:d.b,ariaLabel:"Menu: Gastos",action:function(){return l.onOpen()}}),r.a.createElement(Rt,{listItemDrawerState:c,expenseDrawerState:i,confirmationDrawerState:y,expenseData:a,setConfirmationMenuData:C,deleteFunction:P}),r.a.createElement(At,{actionButtonDrawerState:l,onAddExpenseClick:function(e){return function(e){o(Object(p.a)({},Bt)),h({title:e,mode:"create"}),i.onOpen()}(e)},onAddExpenseCategoryClick:u,onModifyExpenseCategoryClick:s}),r.a.createElement(Vt,{categories:B,expenseDrawerState:i,expenseDrawerFormState:O,submitFunction:function(e){return k(e)},expenseData:a}),r.a.createElement(Tt,{submitFunction:F,expenseCategoryDrawerState:u,categories:B}),r.a.createElement(Lt,{submitFunction:F,modifyExpenseCategoryDrawerState:s,categories:B,selectedCategory:T,deleteExpenseCategoryById:M,confirmationDrawerState:y,setConfirmationMenuData:C,expenseCategoryDrawerState:u}))}function zt(){return r.a.createElement(A,{title:"Configuracion"},"Configuracion")}new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01"),new Date("1970-01-01 00:00:01");var Ut=function(){var e=Object(f.a)(),t=e.isOpen,a=e.onOpen,o=e.onClose,c=Object(n.useContext)(E),l=c.store.confirmationMenu,i=l.title,u=l.action,s=l.subtitle,m=c.confirmationDrawerState;return r.a.createElement(k.a,{basename:Object({NODE_ENV:"production",PUBLIC_URL:"/chakra-stock",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ROOT_API:"https://chakra-stock.herokuapp.com/"}).PUBLIC_URI},r.a.createElement(h,{onMenuClick:a}),r.a.createElement($,{isOpen:m.isOpen,onClose:m.onClose,title:i,action:u,subtitle:s}),r.a.createElement(M,{isOpen:t,onClose:o,links:[{name:"Inicio",link:"/",icon:d.h},{name:"Stock",link:"/stock",icon:d.g},{name:"Pedidos",link:"/pedidos",icon:d.i},{name:"Contactos",link:"/contactos",icon:d.m},{name:"Transacciones",link:"/transacciones",icon:d.e},{name:"Gastos",link:"/gastos",icon:d.b}]}),r.a.createElement(Y.c,null,r.a.createElement(Y.a,{exact:!0,path:"/",component:Ae}),r.a.createElement(Y.a,{path:"/stock",component:nt}),r.a.createElement(Y.a,{path:"/pedidos",component:Ot}),r.a.createElement(Y.a,{path:"/contactos",component:jt}),r.a.createElement(Y.a,{path:"/transacciones",component:Mt}),r.a.createElement(Y.a,{path:"/gastos",component:qt}),r.a.createElement(Y.a,{path:"/configuracion",component:zt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Nt=a(434),Gt=Object(p.a)(Object(p.a)({},Nt.a),{},{colors:Object(p.a)(Object(p.a)({},Nt.a.colors),{},{brand:{900:"#1a365d",800:"#153e75",700:"#2a69ac"}}),breakpoints:["30em","48em","62em","80em"],fonts:{heading:'"Avenir Next", sans-serif',body:"system-ui, sans-serif",mono:"Menlo, monospace"},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"4rem"}}),Ht=a(42),$t=a(442),Wt=a(226),Kt=a.n(Wt),Yt="https://chakra-stock.herokuapp.com/login",Jt=function(){var e=Object(n.useContext)(C).dispatch,t=Object(Te.b)(),a=t.register,o=t.handleSubmit,c=t.errors,l=t.formState,u=t.setError,s=Object(n.useState)(!1),d=Object(m.a)(s,2),p=d[0],f=d[1],E=o((function(t){var a=t.email,n=t.password;console.log(Yt),f(!0),ae.a.request({url:Yt,method:"POST",data:{email:a,password:n}}).then((function(t){e({type:"SAVE_TOKEN",payload:t.data.token})})).catch((function(e){u("email","El email o la contrase\xf1a son invalidos"),console.log(e)})).finally((function(){return f(!1)}))}));return r.a.createElement(i.a,null,r.a.createElement(i.a,{textAlign:"center"},r.a.createElement(L.a,{as:"h3"},"Admin de Stock")),r.a.createElement(J.a,null),r.a.createElement("form",{onSubmit:E},r.a.createElement(Le.a,{isInvalid:c.email||c.password},c&&c.email&&r.a.createElement(qe.a,null,c.email.type),r.a.createElement(pt.a,{htmlFor:"email"},"Email"),r.a.createElement(Ve.a,{type:"email",name:"email",ref:a({required:!0})}),r.a.createElement(pt.a,{htmlFor:"password"},"Password"),r.a.createElement(Ve.a,{type:"password",name:"password",ref:a({required:!0})}),r.a.createElement(i.a,{mt:4,width:"100%",display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",alignItems:"center"},r.a.createElement(x.a,{variantColor:"teal",isLoading:l.isSubmitting,type:"submit"},"Submit"),p&&r.a.createElement(X.a,{size:"md"})))))},Qt=function(e){var t=e.children,a=Object(n.useContext)(C),o=a.store,c=o.token,l=o.user.name,i=o.isLoading,u=a.dispatch;return Object(n.useEffect)((function(){var e=localStorage.getItem("token");console.log(e),u(e?{type:"SAVE_TOKEN",payload:e}:{type:"LOADING",payload:!1})}),[u]),Object(n.useEffect)((function(){u({type:"LOADING",payload:!0});var e=Kt.a.decode(c);if(e){localStorage.setItem("token",c);var t="https://chakra-stock.herokuapp.com/users/"+e.sub;ae.a.get(t,{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){console.log(e),u({type:"SAVE_USER",payload:e.data.user})})).catch((function(e){return console.log(e)})).finally((function(){return u({type:"LOADING",payload:!1})}))}else u({type:"LOADING",payload:!1})}),[c,u]),r.a.createElement(r.a.Fragment,null,i?r.a.createElement(I,null,r.a.createElement(X.a,{size:"xl"})):l?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(I,null,r.a.createElement(Jt,null)))},Xt=a(227),Zt=a.n(Xt);c.a.render(r.a.createElement(D,null,r.a.createElement(Ht.a,{theme:Gt},r.a.createElement($t.a,null),r.a.createElement("div",{style:{height:"100vh",backgroundImage:"url(".concat(Zt.a,")"),backgroundSize:"cover"}},r.a.createElement(Qt,null,r.a.createElement(O,null,r.a.createElement(Ut,null)))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[228,1,2]]]);
//# sourceMappingURL=main.97bf8017.chunk.js.map